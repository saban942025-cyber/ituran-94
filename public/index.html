<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saban AI Archive - × ×™×”×•×œ ×¦×™ ×—×›×</title>
    <style>
        :root { --primary: #2563eb; --danger: #ef4444; --bg: #f8fafc; }
        body { font-family: system-ui, -apple-system, sans-serif; background-color: var(--bg); margin: 0; padding: 20px; color: #1e293b; text-align: right; }
        
        /* ×›×•×ª×¨×ª */
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        
        /* ×›×¨×˜×™×¡ Ticket */
        .ticket-card { 
            background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); 
            padding: 20px; max-width: 500px; margin: 0 auto; border-right: 6px solid var(--danger);
        }
        .ticket-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .ticket-id { font-weight: bold; color: #64748b; font-size: 0.9em; }
        .client-name { font-size: 1.25rem; font-weight: 800; color: #0f172a; display: block; }
        
        .ai-analysis { 
            background: #fef2f2; border: 1px solid #fee2e2; padding: 12px; border-radius: 8px; 
            margin: 15px 0; font-size: 0.95em; line-height: 1.5;
        }
        .status-badge { background: var(--danger); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8em; font-weight: bold; }

        /* ×›×¤×ª×•×¨ */
        .view-btn { 
            width: 100%; background-color: var(--primary); color: white; border: none; 
            padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 1em;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .view-btn:hover { background-color: #1d4ed8; }

        /* ××•×“××œ (Popup) */
        #pdfModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center; padding: 10px; }
        .modal-content { 
            background: white; width: 95%; max-width: 1000px; height: 90vh; 
            border-radius: 15px; position: relative; overflow: hidden; display: flex; flex-direction: column; 
        }
        .close-btn { 
            position: absolute; top: 15px; left: 15px; background: white; border: 1px solid #ccc; 
            border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 20px; z-index: 2001; 
            display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Iframe */
        #pdfFrame { width: 100%; height: 100%; border: none; }

        /* ×”×ª×××” ×œ× ×™×™×“ */
        @media (max-width: 600px) {
            .ticket-card { width: 90%; }
            .modal-content { height: 95vh; width: 100%; }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Saban AI Archive</h1>
        <p>× ×™×”×•×œ ×¦×™ ×—×›× - ×—. ×¡×‘×Ÿ</p>
    </div>

    <div class="ticket-card">
        <div class="ticket-header">
            <div>
                <span class="ticket-id">Ticket #6710293</span>
                <span class="client-name">××•×¨× ×™×œ-××©×¨ ×œ×•×™</span>
            </div>
            <span class="status-badge">×—×¨×™×’×”</span>
        </div>

        <div class="ai-analysis">
            <strong>× ×™×ª×•×— AI ×“×™× ××™:</strong><br>
            ×—×¡×¨×” ×—×ª×™××”; ×©×¢×•×ª ×‘×›×ª×‘ ×™×“ ×“×•-××©××¢×™×•×ª ××š ×—×œ×•×Ÿ PTO ××××ª ×¤×¢×™×œ×•×ª. ×¤×¢×¨ ×¡×™×•× 13 ×“×§×•×ª.
        </div>

        <button class="view-btn" onclick="smartView('https://drive.google.com/file/d/1EM6XNuGHXqq-vh-64QrhWApIHt8RwVvq/view?usp=sharing')">
            <span>ğŸ“„</span> ×¦×¤×” ×‘×ª×¢×•×“×” ××§×•×¨×™×ª
        </button>
    </div>

    <div id="pdfModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">âœ•</button>
            <iframe id="pdfFrame" src=""></iframe>
        </div>
    </div>

    <script>
        function smartView(url) {
            if (!url || url.includes('×”×“×‘×§_×›××Ÿ')) {
                alert('× × ×œ×”×–×™×Ÿ ×œ×™× ×§ ×ª×§×™×Ÿ ××”×“×¨×™×™×‘');
                return;
            }

            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            let finalUrl = url;

            // ×”××¨×” ××•×˜×•××˜×™×ª ×©×œ ×œ×™× ×§ Google Drive ×œ×ª×¦×•×’×ª Preview (×”×¦×•×¨×” ×©×œ ×”×¤×¨×™×™×)
            if (url.includes('drive.google.com')) {
                // ××˜×¤×œ ×‘×œ×™× ×§ ×¨×’×™×œ /view ×•×’× ×‘×œ×™× ×§×™× ××¡×•×’ open?id=
                finalUrl = url.replace(/\/view.*$/, '/preview').replace(/\/edit.*$/, '/preview');
                if (url.includes('open?id=')) {
                    finalUrl = url.replace('open?id=', 'file/d/') + '/preview';
                }
            }

            if (isMobile) {
                // ×‘× ×™×™×“ ×¤×•×ª×—×™× ×‘×˜××‘ ×—×“×© - ×”×›×™ × ×•×— ×œ×§×¨×™××ª PDF
                window.open(finalUrl, '_blank');
            } else {
                // ×‘××—×©×‘ ×¤×•×ª×—×™× ×‘×ª×•×š ×”-Popup ×©×‘× ×™× ×•
                document.getElementById('pdfFrame').src = finalUrl;
                document.getElementById('pdfModal').style.display = 'flex';
                document.body.style.overflow = 'hidden'; // ×× ×™×¢×ª ×’×œ×™×œ×” ×©×œ ×”×“×£ ×××—×•×¨
            }
        }

        function closeModal() {
            document.getElementById('pdfModal').style.display = 'none';
            document.getElementById('pdfFrame').src = ''; // × ×™×§×•×™ ×›×“×™ ×©×œ× ×™××©×™×š ×œ×˜×¢×•×Ÿ ×‘×¨×§×¢
            document.body.style.overflow = 'auto';
        }

        // ×¡×’×™×¨×” ×‘×œ×—×™×¦×” ××—×•×¥ ×œ×—×œ×•×Ÿ
        window.onclick = function(event) {
            const modal = document.getElementById('pdfModal');
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
